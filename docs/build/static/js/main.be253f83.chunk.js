(this.webpackJsonpapp=this.webpackJsonpapp||[]).push([[0],{23:function(t,e,n){t.exports=n(34)},28:function(t,e,n){},33:function(t,e,n){},34:function(t,e,n){"use strict";n.r(e);var a=n(2),o=n.n(a),r=n(19),c=n.n(r),s=(n(28),n(20)),i=n(12),u=n(7),l=n(16),d=n.n(l),p=n(21),h=n(5),v=n(14);n(33);function f(t){return{type:"FeatureCollection",features:t.map((function(t){return{type:"Feature",geometry:{type:"Point",coordinates:[t.longitude,t.latitude]}}}))}}var m=function(){var t,e,n,r,c=Object(a.useState)([]),l=Object(h.a)(c,2),m=l[0],j=l[1];Object(a.useEffect)((function(){Object(p.a)(d.a.mark((function t(){var e,n,a,o,r,c,s,i;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=[],t.prev=1,t.next=4,fetch("/stations.json");case 4:return a=t.sent,t.next=7,a.json();case 7:e=t.sent,t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),console.warn(t.t0);case 13:return t.prev=13,t.next=16,fetch("/statuses.json");case 16:return o=t.sent,t.next=19,o.json();case 19:n=t.sent,t.next=25;break;case 22:t.prev=22,t.t1=t.catch(13),console.warn(t.t1);case 25:return t.prev=25,t.next=28,fetch("http://127.0.0.1:8081/stations.json");case 28:return r=t.sent,t.next=31,r.json();case 31:e=t.sent,t.next=37;break;case 34:t.prev=34,t.t2=t.catch(25),console.warn(t.t2);case 37:return t.prev=37,t.next=40,fetch("http://127.0.0.1:8081/statuses.json");case 40:return c=t.sent,t.next=43,c.json();case 43:n=t.sent,t.next=49;break;case 46:t.prev=46,t.t3=t.catch(37),console.warn(t.t3);case 49:s=e.chargerstations,i=s.map((function(t){var e,a,o,r=null!==(e=null===(a=t.csmd.Position.match(/([\d]+\.[\d]+),([\d]+\.[\d]+)/))||void 0===a?void 0:a.slice(1))&&void 0!==e?e:["0","0"],c=Object(h.a)(r,2),s=c[0],i=c[1],u=null!==(o=n.find((function(e){return e.uuid===t.csmd.International_id})))&&void 0!==o?o:null;return{longitude:parseFloat(i),latitude:parseFloat(s),status:u}})),j(i);case 52:case"end":return t.stop()}}),t,null,[[1,10],[13,22],[25,34],[37,46]])})))()}),[]);var b=Object(a.useMemo)((function(){return m.filter((function(t){return t.status})).filter((function(t){return-1!==t.status.status}))}),[m]),w=Object(a.useMemo)((function(){return b.reduce((function(t,e){var n,a=e.status.connectors.reduce((function(t,e){return t+(0===e.status?1:0)}),0);a=a>8?8:a;var o=e.status.connectors.length,r="station-"+((o=o>8?8:o)-a)+"-"+a;return t.set(r,[].concat(Object(u.a)(null!==(n=t.get(r))&&void 0!==n?n:[]),[e])),t}),new Map)}),[b]),g=Object(a.useState)({latitude:null!==(t=null===(e=b[0])||void 0===e?void 0:e.latitude)&&void 0!==t?t:0,longitude:null!==(n=null===(r=b[0])||void 0===r?void 0:r.longitude)&&void 0!==n?n:0,zoom:8}),y=Object(h.a)(g,2),x=y[0],k=y[1];return void 0===b[0]?null:o.a.createElement(v.c,Object.assign({width:"100vw",height:"100vh",mapboxApiAccessToken:"pk.eyJ1Ijoiam9uYXNqc28iLCJhIjoiY2tkbjEzZ2RoMWRwcTJ6bXJwanpnYmFmNyJ9.m7V5GeFoMDSkX8uhyGmYUQ"},x,{onViewportChange:function(t){return function(t){t.width,t.height;var e=Object(i.a)(t,["width","height"]);k(Object(s.a)({},e))}(t)},mapStyle:"mapbox://styles/jonasjso/ckdnf47e32nq31imtzdpo76lw/draft",style:{height:"100vh",width:"100vw"}}),Array.from(w.entries()).map((function(t){var e=Object(h.a)(t,2),n=e[0],a=e[1];return o.a.createElement(v.b,{key:n,id:"source-"+n,type:"geojson",data:f(a)},o.a.createElement(v.a,{type:"symbol",layout:{"icon-image":n,"icon-allow-overlap":!0,"icon-size":["interpolate",["linear"],["zoom"],5,.05,10,.1,15,.2]},paint:{}}))})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(m,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))}},[[23,1,2]]]);
//# sourceMappingURL=main.be253f83.chunk.js.map